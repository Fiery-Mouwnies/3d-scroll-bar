/*
Auto-generated by: https://github.com/pmndrs/gltfjsx
Author: karmadefender (https://sketchfab.com/karmadefender)
License: CC-BY-4.0 (http://creativecommons.org/licenses/by/4.0/)
Source: https://sketchfab.com/3d-models/granola-bar-9efbda4311a64782a73b5ce382a6e841
Title: Granola Bar
*/

import * as THREE from 'three'
import React, { forwardRef } from 'react'
import { useGLTF } from '@react-three/drei'
import { GLTF } from 'three-stdlib'
import { GroupProps } from '@react-three/fiber'

type GLTFResult = GLTF & {
  nodes: {
    pCube3_aiStandardSurface1_0: THREE.Mesh
    pCube6_aiStandardSurface2_0: THREE.Mesh
    pCube329_aiStandardSurface3_0: THREE.Mesh
    // Add any other nodes your model might have here
  }
  materials: {
    aiStandardSurface1: THREE.MeshStandardMaterial
    aiStandardSurface2: THREE.MeshStandardMaterial
    aiStandardSurface3: THREE.MeshStandardMaterial
  }
}

// Wrap the component in forwardRef to accept the ref from the App component.
// We also add GroupProps for better type-safety on props like `position`, `scale`, etc.
export const Energybar = forwardRef<THREE.Group, GroupProps>((props, ref) => {
  const { nodes, materials } = useGLTF('/granola_bar_3d.glb') as GLTFResult
  
  return (
    // Assign the forwarded ref to the top-level group
    <group {...props} dispose={null} ref={ref}>
      <group rotation={[-0.0479, 0.0252, 0.1389]}>
        <mesh
          geometry={nodes.pCube3_aiStandardSurface1_0.geometry}
          material={materials.aiStandardSurface1}
          scale={[20.612, 5.842, 3.519]}
        />
        <mesh
          geometry={nodes.pCube6_aiStandardSurface2_0.geometry}
          material={materials.aiStandardSurface2}
          position={[-11.263, 4.109, 0]}
          rotation={[-1.574, 0.075, -0.003]}
          scale={[0.536, 0.022, 0.034]}
        />
        <mesh
          geometry={nodes.pCube329_aiStandardSurface3_0.geometry}
          material={materials.aiStandardSurface3}
          position={[11.795, 3.532, 0]}
          rotation={[-1.566, 0.058, 0]}
          scale={[0.71, 0.014, 0.034]}
        />
        {/* Add the rest of your model's meshes here if there are more */}
      </group>
    </group>
  )
})

useGLTF.preload('/granola_bar_3d.glb')